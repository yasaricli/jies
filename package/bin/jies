#!/usr/bin/env node

var path = require('path'),
    Jies = require('../lib/core.js'),
    fs = require('fs'),
    _ = require('underscore'),

    helpers = require('../lib/helpers.js');

var json = path.resolve('jies.json'),
    action = process.argv[2];

helpers.getHelper('startedLog');

switch(action) {
  case 'init':
    var exampleJson = path.resolve(__dirname, '../example/jies.json'),
        content = fs.readFileSync(exampleJson, 'utf8');

    if(fs.existsSync(json)) {
      return helpers.getHelper('alreadyLog');
    }

    return fs.writeFileSync(json, content);
  break;

  case 'install':
    var J = new Jies.Init();

    if (!fs.existsSync(json)) {
      return helpers.getHelper('notExistLog');
    }

    fs.readFile(json, 'utf8', function (err, data) {
      var options = JSON.parse(data);

      console.log('\n -- Started '+ options.name +' -- \n');

      J.include(options.functions, function(name) {
        console.log(name + ' --> included.');
      });
    });
  break;

  default:
    helpers.getHelper('validLog');
};
